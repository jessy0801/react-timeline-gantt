!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react"),require("moment")):"function"==typeof define&&define.amd?define("react-gantt-timeline",["React","moment"],e):"object"==typeof exports?exports["react-gantt-timeline"]=e(require("react"),require("moment")):t["react-gantt-timeline"]=e(t.React,t.moment)}(window,function(t,e){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=12)}([function(e,n){e.exports=t},function(t,n){t.exports=e},function(t,e,n){t.exports=n(5)()},function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=function(t,e){var n=t[1]||"",o=t[3];if(!o)return n;if(e&&"function"==typeof btoa){var r=(a=o,s=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(c," */")),i=o.sources.map(function(t){return"/*# sourceURL=".concat(o.sourceRoot||"").concat(t," */")});return[n].concat(i).concat([r]).join("\n")}var a,s,c;return[n].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n}).join("")},e.i=function(t,n,o){"string"==typeof t&&(t=[[null,t,""]]);var r={};if(o)for(var i=0;i<this.length;i++){var a=this[i][0];null!=a&&(r[a]=!0)}for(var s=0;s<t.length;s++){var c=[].concat(t[s]);o&&r[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),e.push(c))}},e}},function(t,e,n){var o,r,i={},a=(o=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===r&&(r=o.apply(this,arguments)),r}),s=function(t){var e={};return function(t){if("function"==typeof t)return t();if(void 0===e[t]){var n=function(t){return document.querySelector(t)}.call(this,t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}}(),c=null,u=0,l=[],p=n(9);function f(t,e){for(var n=0;n<t.length;n++){var o=t[n],r=i[o.id];if(r){r.refs++;for(var a=0;a<r.parts.length;a++)r.parts[a](o.parts[a]);for(;a<o.parts.length;a++)r.parts.push(g(o.parts[a],e))}else{var s=[];for(a=0;a<o.parts.length;a++)s.push(g(o.parts[a],e));i[o.id]={id:o.id,refs:1,parts:s}}}}function d(t,e){for(var n=[],o={},r=0;r<t.length;r++){var i=t[r],a=e.base?i[0]+e.base:i[0],s={css:i[1],media:i[2],sourceMap:i[3]};o[a]?o[a].parts.push(s):n.push(o[a]={id:a,parts:[s]})}return n}function h(t,e){var n=s(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var o=l[l.length-1];if("top"===t.insertAt)o?o.nextSibling?n.insertBefore(e,o.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),l.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var r=s(t.insertInto+" "+t.insertAt.before);n.insertBefore(e,r)}}function y(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=l.indexOf(t);e>=0&&l.splice(e,1)}function b(t){var e=document.createElement("style");return void 0===t.attrs.type&&(t.attrs.type="text/css"),m(e,t.attrs),h(t,e),e}function m(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function g(t,e){var n,o,r,i;if(e.transform&&t.css){if(!(i=e.transform(t.css)))return function(){};t.css=i}if(e.singleton){var a=u++;n=c||(c=b(e)),o=k.bind(null,n,a,!1),r=k.bind(null,n,a,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",m(e,t.attrs),h(t,e),e}(e),o=function(t,e,n){var o=n.css,r=n.sourceMap,i=void 0===e.convertToAbsoluteUrls&&r;(e.convertToAbsoluteUrls||i)&&(o=p(o));r&&(o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var a=new Blob([o],{type:"text/css"}),s=t.href;t.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,n,e),r=function(){y(n),n.href&&URL.revokeObjectURL(n.href)}):(n=b(e),o=function(t,e){var n=e.css,o=e.media;o&&t.setAttribute("media",o);if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),r=function(){y(n)});return o(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;o(t=e)}else r()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=a()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=d(t,e);return f(n,e),function(t){for(var o=[],r=0;r<n.length;r++){var a=n[r];(s=i[a.id]).refs--,o.push(s)}t&&f(d(t,e),e);for(r=0;r<o.length;r++){var s;if(0===(s=o[r]).refs){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete i[s.id]}}}};var v,w=(v=[],function(t,e){return v[t]=e,v.filter(Boolean).join("\n")});function k(t,e,n,o){var r=n?"":o.css;if(t.styleSheet)t.styleSheet.cssText=w(e,r);else{var i=document.createTextNode(r),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(i,a[e]):t.appendChild(i)}}},function(t,e,n){"use strict";var o=n(6);function r(){}t.exports=function(){function t(t,e,n,r,i,a){if(a!==o){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e};return n.checkPropTypes=r,n.PropTypes=n,n}},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,n){var o=n(8);"string"==typeof o&&(o=[[t.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(4)(o,r);o.locals&&(t.exports=o.locals)},function(t,e,n){(e=n(3)(!1)).push([t.i,".header-top {\n  height: 20px;\n\n  border-bottom: solid 0.5px silver;\n}\n\n.header-middle {\n  height: 20px;\n  background-color: chocolate;\n  color: white;\n  font-size: 10px;\n  border-bottom: solid 0.5px silver;\n}\n.header-bottom {\n  height: 20px;\n  font-size: 10px;\n  border-bottom: solid 0.5px silver;\n}\n",""]),t.exports=e},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,o=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var r,i=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?t:(r=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:o+i.replace(/^\.\//,""),"url("+JSON.stringify(r)+")")})}},function(t,e,n){var o=n(11);"string"==typeof o&&(o=[[t.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(4)(o,r);o.locals&&(t.exports=o.locals)},function(t,e,n){(e=n(3)(!1)).push([t.i,".timeLine {\n  display: flex;\n  flex-direction: row;\n  width: 100%;\n  height: 100%;\n  border: solid 1px rgb(207, 207, 205);\n  font-size: 12px;\n  user-select: none;\n  -moz-user-select: none;\n  -webkit-user-select: none;\n  -ms-user-select: none;\n}\n\n/* Main Area */\n\n.timeLine-main {\n  flex: 1 1 100%;\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  overflow-y: hidden;\n}\n/* Main Area Header*/\n\n.timeLine-main-header-viewPort {\n  flex: 0 0 60px;\n  position: relative;\n  height: 60px;\n  width: 100%;\n  background-color: rgb(112, 112, 112);\n  overflow: hidden;\n}\n\n.timeLine-main-header-container {\n  flex: 0 0 60px;\n  position: relative;\n  top: 0;\n  left: 0;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  background-color: #333333;\n  overflow: hidden;\n  user-select: none;\n}\n\n.timeLine-main-header-day-item {\n  position: absolute;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  background-color: rgb(112, 112, 112);\n  font-size: 10px;\n  text-align: center;\n  border-right: solid 1px;\n  border-top: solid 1px;\n  border-bottom: solid 1px;\n  top: 20px;\n  height: 40px;\n  color: white;\n  text-align: center;\n}\n\n.timeLine-main-header-top-item {\n  position: absolute;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  border-right: solid 1px white;\n  height: 20px;\n  z-index: 91;\n}\n\n.timeLine-main-header-day-week {\n  flex: 0 0 12px;\n  padding: 4px;\n  z-index: 90;\n}\n\n.timeLine-main-header-day-month {\n  top: 0px;\n  position: sticky;\n  flex: 0 0 15px;\n  padding: 5px;\n  z-index: 90;\n}\n\n.timeLine-main-header-time {\n  display: flex;\n  flex-direction: row;\n  align-items: stretch;\n  height: 22px;\n  justify-content: stretch;\n}\n\n.timeLine-main-header-time-item {\n  border-left: solid 1px silver;\n  border-bottom: solid 1px silver;\n  border-top: solid 1px silver;\n  text-align: center;\n  padding-top: 5px;\n}\n/* Main Area Data*/\n\n.timeLine-main-data-viewPort {\n  flex: 1 1 auto;\n  position: relative;\n  overflow: hidden;\n  background-color: #fbf9f9;\n}\n.timeLine-main-data-container {\n  position: relative;\n  top: 0;\n  left: 0;\n  height: 100%;\n  background-color: rgb(255, 255, 255);\n}\n\n.timeLine-main-data-row {\n  position: absolute;\n  width: 100%;\n  height: 50px;\n}\n\n.timeLine-main-data-task {\n  position: absolute;\n  background-color: darkorchid;\n  border-radius: 14px;\n  color: white;\n  text-align: center;\n}\n\n.timeLine-main-data-task-side {\n  position: absolute;\n  width: 10px;\n\n  cursor: col-resize;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n}\n.timeLine-main-data-task-side-linker {\n  width: 8px;\n  height: 8px;\n  border-radius: 4px;\n  cursor: default;\n  z-index: 100;\n}\n.timeLine-main-data-task-side-linker:hover {\n  background-color: black;\n  border: solid 0.5px grey;\n}\n.note-text-stroke {\n  -webkit-text-stroke: 0.75px white;\n}\n/* .timeLine-main-data-task:hover {\n    background-color:chocolate;\n    border:solid 2px darkorchid;\n    cursor: move;\n} */\n\n.timeLine-main-data-verticalLine {\n  flex: 1 1 auto;\n  height: 100%;\n  width: 24px;\n  background-color: white;\n  border-left-width: 0.5px;\n  border-left-color: rgb(207, 207, 205);\n  border-left-style: dashed;\n}\n\n/* Side Area */\n\n.timeLine-side-main {\n  flex: 0 0 auto;\n  width: 108px;\n  min-width: 108px;\n  display: flex;\n  flex-direction: row;\n}\n\n.timeLine-side {\n  flex: 1 0 100px;\n  display: flex;\n  flex-direction: column;\n  border-right: solid 1px rgb(207, 207, 205);\n}\n\n.verticalResizer {\n  flex: 0 0 8px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  cursor: col-resize;\n  border-right: solid 1px rgb(207, 207, 205);\n  height: 100%;\n}\n.squareGrip {\n  flex: 0 0 auto;\n\n  border-radius: 50%;\n  height: 5px;\n  width: 5px;\n  margin: 3px 0;\n}\n\n.timeLine-side-title {\n  flex: 0 0 60px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.timeLine-side-task-viewPort {\n  position: relative;\n  flex: 1 1 auto;\n  height: 100%;\n  background-color: #fbf9f9;\n  overflow-x: hidden;\n  overflow-y: auto;\n}\n\n.timeLine-side-task-container {\n  position: relative;\n  overflow-x: hidden;\n  overflow-y: hidden;\n}\n\n.timeLine-side-task-row {\n  position: absolute;\n  width: 100%;\n  background-color: rgb(112, 112, 112);\n  border-bottom-width: 0.5px;\n  border-bottom-color: rgb(207, 207, 205);\n  border-bottom-style: solid;\n  height: 30px;\n  color: grey;\n  text-align: center;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  outline: none;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n}\n",""]),t.exports=e},function(t,e,n){"use strict";n.r(e);var o=n(0),r=n.n(o),i=n(2),a=n.n(i);function s(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var c={header:{top:{style:{backgroundColor:"#333333",fontSize:10,color:"white",textAlign:"center"}},middle:{style:{backgroundColor:"chocolate"},selectedStyle:{backgroundColor:"#b13525",fontWeight:"bold"}},bottom:{style:{background:"grey",color:"white",fontSize:9},currentDayStyle:{background:"white",color:"black",fontSize:9},selectedStyle:{backgroundColor:"#b13525",fontWeight:"bold"}}},taskList:{title:{label:"Projects",style:{backgroundColor:"#333333",borderBottom:"solid 1px silver",color:"white",textAlign:"center"}},task:{style:{backgroundColor:"#fbf9f9"}},verticalSeparator:{style:{backgroundColor:"#333333"},grip:{style:{backgroundColor:"#cfcfcd"}}}},dataViewPort:{rows:{style:{backgroundColor:"#fbf9f9",borderBottom:"solid 0.5px #cfcfcd"}},task:{showLabel:!1,taskNoteStyle:{fontSize:"12px",fontWeight:"bold",color:"black",marginLeft:"10px",zIndex:1,stroke:"white"},style:{position:"absolute",borderRadius:14,color:"white",textAlign:"center",backgroundColor:"grey"},styleSection:{position:"absolute",borderRadius:14,color:"white",textAlign:"center",fontWeight:"bold",backgroundColor:"grey"},selectedStyle:{position:"absolute",borderRadius:14,border:"solid 1px #ff00fa",color:"white",textAlign:"center",backgroundColor:"grey"}}},links:{color:"black",selectedColor:"#ff00fa"}},u=new(function(){function t(){var e,n,o,r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o=function(t){r.data={},t?r.populate(t,c,r.data):r.data=c},(n="load")in(e=this)?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o,this.data=c}var e,n,o;return e=t,(n=[{key:"populate",value:function(t,e,n){if(this.isObject(e))for(var o in e)t[o]?(n[o]=t[o],this.populate(t[o],e[o],n[o])):n[o]=e[o]}},{key:"isObject",value:function(t){return"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t}},{key:"values",get:function(){return this.data}}])&&s(e.prototype,n),o&&s(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}());function l(t){"@babel/helpers - typeof";return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function d(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,o=y(t);if(e){var r=y(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return function(t,e){if(e&&("object"===l(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return h(t)}(this,n)}}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}(s,o["Component"]);var e,n,i,a=d(s);function s(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(e=a.call(this,t)).doMouseMove=e.doMouseMove.bind(h(e)),e.doMouseDown=e.doMouseDown.bind(h(e)),e.doMouseUp=e.doMouseUp.bind(h(e)),e.state={dragging:!1},e}return e=s,(n=[{key:"doMouseDown",value:function(t){0===t.button&&(this.draggingPosition=t.clientX,this.setState({dragging:!0}))}},{key:"componentDidUpdate",value:function(t,e){this.state.dragging&&!e.dragging?(document.addEventListener("mousemove",this.doMouseMove),document.addEventListener("mouseup",this.doMouseUp)):!this.state.dragging&&e.dragging&&(document.removeEventListener("mousemove",this.doMouseMove),document.removeEventListener("mouseup",this.doMouseUp))}},{key:"doMouseMove",value:function(t){if(this.state.dragging){t.stopPropagation();var e=this.draggingPosition-t.clientX;this.draggingPosition=t.clientX,this.props.onTaskListSizing(e)}}},{key:"doMouseUp",value:function(t){this.setState({dragging:!1})}},{key:"render",value:function(){return r.a.createElement("div",{className:"verticalResizer",style:u.values.taskList.verticalSeparator.style,onMouseDown:this.doMouseDown},r.a.createElement("div",{className:"squareGrip",style:u.values.taskList.verticalSeparator.grip.style}),r.a.createElement("div",{className:"squareGrip",style:u.values.taskList.verticalSeparator.grip.style}),r.a.createElement("div",{className:"squareGrip",style:u.values.taskList.verticalSeparator.grip.style}),r.a.createElement("div",{className:"squareGrip",style:u.values.taskList.verticalSeparator.grip.style}))}}])&&p(e.prototype,n),i&&p(e,i),Object.defineProperty(e,"prototype",{writable:!1}),s}(),m=n(1),g=n.n(m),v=0,w=30,k=5e3,O="day",x="week",S="month",P="year";function j(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function T(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var E=new(function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),T(this,"dayToPosition",function(t,e,n){return t*n+e}),T(this,"daysInYear",function(t){return e.isLeapYear(t)?366:365})}var e,n,o;return e=t,(n=[{key:"dateToPixel",value:function(t,e,n){var o=this.getToday(),r=new Date(t),i=60*(r.getTimezoneOffset()-o.getTimezoneOffset())*1e3;return(r.getTime()-o.getTime()-i)/36e5*(n/24)+e}},{key:"pixelToDate",value:function(t,e,n){var o=24/n,r=t-e,i=this.getToday(),a=i.getTime()+r*o*36e5,s=new Date(a),c=60*(s.getTimezoneOffset()-i.getTimezoneOffset())*1e3;return s.setTime(s.getTime()+c),s}},{key:"getToday",value:function(){var t=new Date;return t.setHours(0,0,0,0),t}},{key:"monthDiff",value:function(t,e){return Math.abs(e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear()))}},{key:"daysInMonth",value:function(t,e){return new Date(e,t,0).getDate()}},{key:"isLeapYear",value:function(t){return t%400==0||t%100!=0&&t%4==0}}])&&j(e.prototype,n),o&&j(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}());n(7);function L(t){"@babel/helpers - typeof";return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function C(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function M(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?C(Object(n),!0).forEach(function(e){R(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function R(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function D(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function I(t,e,n){return e&&_(t.prototype,e),n&&_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function N(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&U(t,e)}function U(t,e){return(U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function z(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,o=B(t);if(e){var r=B(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return function(t,e){if(e&&("object"===L(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return W(t)}(this,n)}}function W(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function B(t){return(B=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var V=function(t){N(n,o["PureComponent"]);var e=z(n);function n(t){return D(this,n),e.call(this,t)}return I(n,[{key:"render",value:function(){return r.a.createElement("div",{style:M(M({display:"flex",justifyContent:"center",alignItems:"center",borderLeft:"solid 1px white",position:"absolute",height:20},this.props.dayStyles),{},{left:this.props.left,width:this.props.width})},r.a.createElement("div",null,this.props.label))}}]),n}(),F=function(t){N(n,o["PureComponent"]);var e=z(n);function n(t){var o;return D(this,n),R(W(o=e.call(this,t)),"getStartDate",function(t,e){var n=null;switch(e){case"year":return n=t.year(),g()([n,0,1]);case"month":n=t.year();var o=t.month();return g()([n,o,1]);case"week":return t.subtract(t.day(),"days");default:return t}}),R(W(o),"renderTime",function(t,e,n,o){for(var i=[],a=e/24,s=0,c=0;c<24;c++)i.push(r.a.createElement(V,{key:c,left:s,width:a,label:"shorttime"==n?c:"".concat(c,":00")})),s+=a;return r.a.createElement("div",{key:o,style:{position:"absolute",height:20,left:t,width:e}}," ",i)}),R(W(o),"renderHeaderRows",function(t,e,n){for(var i={top:[],middle:[],bottom:[]},a={},s="",c="",l="",p=null,f=null,d=o.props.currentday,h=o.props.currentday+o.props.numVisibleDays,y=d-w;y<h+w;y++)s!=(p=g()().add(y,"days")).format(o.getFormat(t,"top"))&&(s=p.format(o.getFormat(t,"top")),f=o.getBox(p,t,a.top),a.top=f.left+f.width,i.top.push(r.a.createElement(V,{key:y,left:f.left,width:f.width,label:s}))),c!=p.format(o.getFormat(e))&&(c=p.format(o.getFormat(e)),f=o.getBox(p,e,a.middle),a.middle=f.left+f.width,i.middle.push(r.a.createElement(V,{key:y,dayStyles:0===y&&u.values.header.bottom.currentDayStyle,left:f.left,width:f.width,label:c}))),l!=p.format(o.getFormat(n))&&(l=p.format(o.getFormat(n)),f=o.getBox(p,n,a.bottom),a.bottom=f.left+f.width,"shorttime"==n||"fulltime"==n?i.bottom.push(o.renderTime(f.left,f.width,n,y)):i.bottom.push(r.a.createElement(V,{key:y,dayStyles:0===y&&u.values.header.bottom.currentDayStyle,left:f.left,width:f.width,label:l})));return r.a.createElement("div",{className:"timeLine-main-header-container",style:{width:k,maxWidth:k}},r.a.createElement("div",{className:"header-top",style:M({},u.values.header.top.style)},i.top),r.a.createElement("div",{className:"header-middle",style:M({},u.values.header.middle.style)},i.middle),r.a.createElement("div",{className:"header-bottom",style:M({},u.values.header.bottom.style)},i.bottom))}),R(W(o),"renderHeader",function(){switch(o.props.mode){case O:return o.renderHeaderRows("week","dayweek","fulltime");case x:return o.renderHeaderRows("week","dayweek","shorttime");case S:return o.renderHeaderRows("month","dayweek","daymonth");case P:return o.renderHeaderRows("year","month","week")}}),R(W(o),"setBoundaries",function(){o.start=o.props.currentday-w,o.end=o.props.currentday+o.props.numVisibleDays+w}),R(W(o),"needToRender",function(){return o.props.currentday<o.start||o.props.currentday+o.props.numVisibleDays>o.end}),o.Header=r.a.createRef(),o.setBoundaries(),o}return I(n,[{key:"getFormat",value:function(t,e){switch(t){case"year":return"YYYY";case"month":return"top"==e?"MMMM YYYY":"MMMM";case"week":return"top"==e?"ww MMMM YYYY":"ww";case"dayweek":return"dd";case"daymonth":return"D"}}},{key:"getModeIncrement",value:function(t,e){switch(e){case"year":return E.daysInYear(t.year());case"month":return t.daysInMonth();case"week":return 7;default:return 1}}},{key:"getBox",value:function(t,e,n){var o=this.getModeIncrement(t,e)*this.props.dayWidth;if(!n){var r=this.getStartDate(t,e);r=r.startOf("day");var i=g()().startOf("day"),a=r.diff(i,"days");n=E.dayToPosition(a,this.props.nowposition,this.props.dayWidth)}return{left:n,width:o}}},{key:"render",value:function(){return this.Header.current&&(this.Header.current.scrollLeft=this.props.scrollLeft),r.a.createElement("div",{id:"timeline-header",ref:this.Header,className:"timeLine-main-header-viewPort"},this.renderHeader())}}]),n}();function A(t){"@babel/helpers - typeof";return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function H(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function Y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?H(Object(n),!0).forEach(function(e){J(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function X(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function q(t,e){return(q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function G(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,o=$(t);if(e){var r=$(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return function(t,e){if(e&&("object"===A(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return K(t)}(this,n)}}function K(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $(t){return($=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function J(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Q=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&q(t,e)}(s,o["Component"]);var e,n,i,a=G(s);function s(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),J(K(e=a.call(this,t)),"onCreateLinkMouseDown",function(t,n){0===t.button&&(t.stopPropagation(),e.props.onStartCreateLink(e.props.item,n))}),J(K(e),"onCreateLinkMouseUp",function(t,n){t.stopPropagation(),e.props.onFinishCreateLink(e.props.item,n)}),J(K(e),"onCreateLinkTouchStart",function(t,n){t.stopPropagation(),e.props.onStartCreateLink(e.props.item,n)}),J(K(e),"onCreateLinkTouchEnd",function(t,n){t.stopPropagation(),e.props.onFinishCreateLink(e.props.item,n)}),J(K(e),"doMouseDown",function(t,n){e.props.onUpdateTask&&0===t.button&&(t.stopPropagation(),e.dragStart(t.clientX,n))}),J(K(e),"doMouseMove",function(t){e.state.dragging&&(t.stopPropagation(),e.dragProcess(t.clientX))}),J(K(e),"doMouseUp",function(){e.dragEnd()}),J(K(e),"doTouchStart",function(t,n){e.props.onUpdateTask&&(t.stopPropagation(),e.dragStart(t.touches[0].clientX,n))}),J(K(e),"doTouchMove",function(t){e.state.dragging&&(t.stopPropagation(),e.dragProcess(t.changedTouches[0].clientX))}),J(K(e),"doTouchEnd",function(t){e.dragEnd()}),e.calculateStyle=e.calculateStyle.bind(K(e)),e.state={dragging:!1,left:e.props.left,width:e.props.width,mode:v},e}return e=s,(n=[{key:"componentDidUpdate",value:function(t,e){this.state.dragging&&!e.dragging?(document.addEventListener("mousemove",this.doMouseMove),document.addEventListener("mouseup",this.doMouseUp),document.addEventListener("touchmove",this.doTouchMove),document.addEventListener("touchend",this.doTouchEnd)):!this.state.dragging&&e.dragging&&(document.removeEventListener("mousemove",this.doMouseMove),document.removeEventListener("mouseup",this.doMouseUp),document.removeEventListener("touchmove",this.doTouchMove),document.removeEventListener("touchend",this.doTouchEnd))}},{key:"dragStart",value:function(t,e){this.props.onChildDrag(!0),this.draggingPosition=t,this.setState({dragging:!0,mode:e,left:this.props.left,width:this.props.width})}},{key:"dragProcess",value:function(t){var e=this.draggingPosition-t,n=this.state.left,o=this.state.width;switch(this.state.mode){case 1:n=this.state.left-e;break;case 2:n=this.state.left-e,o=this.state.width+e;break;case 3:o=this.state.width-e}var r={item:this.props.item,position:{start:n-this.props.nowposition,end:n+o-this.props.nowposition}};this.props.onTaskChanging(r),this.setState({left:n,width:o}),this.draggingPosition=t}},{key:"dragEnd",value:function(){this.props.onChildDrag(!1);var t=E.pixelToDate(this.state.left,this.props.nowposition,this.props.dayWidth),e=E.pixelToDate(this.state.left+this.state.width,this.props.nowposition,this.props.dayWidth);this.props.onUpdateTask(this.props.item,{start:t,end:e}),this.setState({dragging:!1,mode:v})}},{key:"calculateStyle",value:function(){var t=this.props.isSelected?u.values.dataViewPort.task.selectedStyle:u.values.dataViewPort.task.style,e=this.props.color?this.props.color:t.backgroundColor;return this.state.dragging?Y(Y({},t),{},{backgroundColor:e,left:this.state.left,width:this.state.width,height:this.props.height-5,top:2}):Y(Y({},t),{},{backgroundColor:e,left:this.props.left,width:this.props.width,height:this.props.height-5,top:2})}},{key:"render",value:function(){var t=this,e=this.calculateStyle();return r.a.createElement("div",{onMouseDown:function(e){return t.doMouseDown(e,1)},onTouchStart:function(e){return t.doTouchStart(e,1)},onClick:function(e){t.props.onSelectItem(t.props.item)},style:e},r.a.createElement("div",{className:"timeLine-main-data-task-side",style:{top:0,left:-4,height:e.height},onMouseDown:function(e){return t.doMouseDown(e,2)},onTouchStart:function(e){return t.doTouchStart(e,2)}},r.a.createElement("div",{className:"timeLine-main-data-task-side-linker",onMouseUp:function(e){return t.onCreateLinkMouseUp(e,"LINK_POS_LEFT")},onTouchEnd:function(e){return t.onCreateLinkTouchEnd(e,"LINK_POS_LEFT")}})),r.a.createElement("div",{style:{overflow:"hidden"}},u.values.dataViewPort.task.showLabel?this.props.item.name:""),r.a.createElement("div",{className:"timeLine-main-data-task-side",style:{top:0,left:e.width-3,height:e.height},onMouseDown:function(e){return t.doMouseDown(e,3)},onTouchStart:function(e){return t.doTouchStart(e,3)}},r.a.createElement("div",{style:{display:"flex",width:"80px",height:"10px",alignItems:"center"}},r.a.createElement("div",{className:"timeLine-main-data-task-side-linker",onMouseDown:function(e){return t.onCreateLinkMouseDown(e,"LINK_POS_RIGHT")},onTouchStart:function(e){return t.onCreateLinkTouchStart(e,"LINK_POS_RIGHT")}}),this.props.note&&r.a.createElement("div",{style:Y({},u.values.dataViewPort.task.taskNoteStyle)},r.a.createElement("p",{className:"note-text-stroke",style:{margin:"0px"}},this.props.note)))))}}])&&X(e.prototype,n),i&&X(e,i),Object.defineProperty(e,"prototype",{writable:!1}),s}();function Z(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var tt=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.data={},this.link={}}var e,n,o;return e=t,(n=[{key:"registerData",value:function(t){var e=this;if(t){this.data={};var n=this.groupData(t,0,t.length);Object.values(n).forEach(function(t,n){t.forEach(function(t){e.data[t.id]={item:t,index:n}})})}}},{key:"registerLinks",value:function(t){if(t){this.link={};for(var e=0,n=0,o=0;o<t.length;o++){e=t[o].start,n=t[o].end;var r={link:t[o],index:o};this.createAddTo(e,this.link,r,o),this.createAddTo(n,this.link,r,o)}}}},{key:"createAddTo",value:function(t,e,n,o){e[t]||(e[t]=[]),-1==e[t].indexOf(n)&&e[t].push(n)}},{key:"getTask",value:function(t){return this.data[t]}},{key:"getLinks",value:function(t){return this.link[t]}},{key:"groupData",value:function(t,e,n){for(var o={},r=e;r<n;r++){var i=t[r];if(!i)break;var a=void 0!==i.groupName?i.groupName:i.id;void 0!==o[a]?o[a].push(i):o[a]=[i]}return o}}])&&Z(e.prototype,n),o&&Z(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}());function et(t){"@babel/helpers - typeof";return(et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function ot(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?nt(Object(n),!0).forEach(function(e){rt(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nt(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function rt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function it(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function at(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function st(t,e,n){return e&&at(t.prototype,e),n&&at(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ct(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ut(t,e)}function ut(t,e){return(ut=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function lt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,o=ft(t);if(e){var r=ft(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return function(t,e){if(e&&("object"===et(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return pt(t)}(this,n)}}function pt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ft(t){return(ft=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var dt=function(t){ct(n,o["Component"]);var e=lt(n);function n(t){return it(this,n),e.call(this,t)}return st(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"timeLine-main-data-row",style:ot(ot({},u.values.dataViewPort.rows.style),{},{top:this.props.top,height:this.props.itemheight})},this.props.children)}}]),n}(),ht=function(t){ct(n,o["Component"]);var e=lt(n);function n(t){var o;return it(this,n),rt(pt(o=e.call(this,t)),"onChildDrag",function(t){o.childDragging=t}),rt(pt(o),"renderRows",function(){var t=[],e=tt.groupData(o.props.data,o.props.startRow,o.props.endRow+1);return Object.keys(e).forEach(function(n,i){var a=e[n];t.push(r.a.createElement(dt,{key:n,label:n,top:i*o.props.itemheight,left:20,itemheight:o.props.itemheight},a.map(function(t){var e=E.dateToPixel(t.start,o.props.nowposition,o.props.dayWidth),n=E.dateToPixel(t.end,o.props.nowposition,o.props.dayWidth)-e;return r.a.createElement(Q,{key:t.id,item:t,label:t.name,note:t.note,nowposition:o.props.nowposition,dayWidth:o.props.dayWidth,color:t.color,left:e,width:n,height:o.props.itemheight,onChildDrag:o.onChildDrag,isSelected:o.props.selectedItem==t,onSelectItem:o.props.onSelectItem,onStartCreateLink:o.props.onStartCreateLink,onFinishCreateLink:o.props.onFinishCreateLink,onTaskChanging:o.props.onTaskChanging,onUpdateTask:o.props.onUpdateTask}," ")})))}),t}),rt(pt(o),"doMouseDown",function(t){0!==t.button||o.childDragging||o.props.onMouseDown(t)}),rt(pt(o),"doMouseMove",function(t){o.props.onMouseMove(t,o.dataViewPort.current)}),rt(pt(o),"doTouchStart",function(t){o.childDragging||o.props.onTouchStart(t)}),rt(pt(o),"doTouchMove",function(t){o.props.onTouchMove(t,o.dataViewPort.current)}),o.childDragging=!1,o.dataViewPort=r.a.createRef(),o}return st(n,[{key:"getContainerHeight",value:function(t){return t>0?t*this.props.itemheight:10}},{key:"componentDidMount",value:function(){this.dataViewPort.current&&(this.dataViewPort.current.scrollLeft=0)}},{key:"render",value:function(){var t,e;isNaN(null===(t=this.dataViewPort.current)||void 0===t?void 0:t.scrollLeft)||isNaN(null===(e=this.dataViewPort.current)||void 0===e?void 0:e.scrollTop)||(this.dataViewPort.current.scrollLeft=this.props.scrollLeft,this.dataViewPort.current.scrollTop=this.props.scrollTop);var n=this.getContainerHeight(this.props.data.length);return r.a.createElement("div",{ref:this.dataViewPort,id:"timeLinedataViewPort",className:"timeLine-main-data-viewPort",onMouseDown:this.doMouseDown,onMouseMove:this.doMouseMove,onMouseUp:this.props.onMouseUp,onMouseLeave:this.props.onMouseLeave,onTouchStart:this.doTouchStart,onTouchMove:this.doTouchMove,onTouchEnd:this.props.onTouchEnd,onTouchCancel:this.props.onTouchCancel},r.a.createElement("div",{className:"timeLine-main-data-container",style:{height:n,width:k,maxWidth:k}},this.renderRows()))}}]),n}();function yt(t){"@babel/helpers - typeof";return(yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function mt(t,e){return(mt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function gt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,o=wt(t);if(e){var r=wt(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return function(t,e){if(e&&("object"===yt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return vt(t)}(this,n)}}function vt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wt(t){return(wt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function kt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ot=20,xt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mt(t,e)}(s,o["Component"]);var e,n,i,a=gt(s);function s(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),kt(vt(e=a.call(this,t)),"calcNormCoordinates",function(){var t;return{cpt1:{x:t=e.props.start.x+(e.props.end.x-e.props.start.x)/2,y:e.props.start.y},cpt2:{x:t,y:e.props.end.y}}}),kt(vt(e),"calcSCoordinates",function(){var t={x:e.props.start.x+Ot,y:e.props.start.y},n=(e.props.end.y-e.props.start.y)/2,o={x:t.x,y:t.y+n},r={x:e.props.end.x-Ot,y:o.y};return{cpt1:t,cpt2:o,cpt3:r,cpt4:{x:r.x,y:r.y+n}}}),kt(vt(e),"getPath",function(){var t=null;return e.props.start.x>e.props.end.x?(t=e.calcSCoordinates(),"M".concat(e.props.start.x," ").concat(e.props.start.y,"  ").concat(t.cpt1.x," ").concat(t.cpt1.y," ").concat(t.cpt2.x," ").concat(t.cpt2.y," ").concat(t.cpt3.x," ").concat(t.cpt3.y," ").concat(t.cpt4.x," ").concat(t.cpt4.y," ").concat(e.props.end.x," ").concat(e.props.end.y)):(t=e.calcNormCoordinates(),"M".concat(e.props.start.x," ").concat(e.props.start.y,"  ").concat(t.cpt1.x," ").concat(t.cpt1.y," ").concat(t.cpt2.x," ").concat(t.cpt2.y," ").concat(e.props.end.x," ").concat(e.props.end.y))}),kt(vt(e),"onSelect",function(t){e.props.onSelectItem&&e.props.onSelectItem(e.props.item)}),e}return e=s,(n=[{key:"render",value:function(){var t=this.props.isSelected?u.values.links.selectedColor:u.values.links.color;return r.a.createElement("g",{className:"timeline-link"},r.a.createElement("path",{pointerEvents:"stroke",onMouseDown:this.onSelect,stroke:"white",d:this.getPath(),strokeLinejoin:"round",fill:"transparent",strokeWidth:"4",cursor:"pointer"}),r.a.createElement("path",{pointerEvents:"stroke",onMouseDown:this.onSelect,stroke:t,d:this.getPath(),strokeLinejoin:"round",fill:"transparent",strokeWidth:"1",cursor:"pointer",markerEnd:"url(#arrow)"}))}}])&&bt(e.prototype,n),i&&bt(e,i),Object.defineProperty(e,"prototype",{writable:!1}),s}();function St(t){"@babel/helpers - typeof";return(St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function jt(t,e){return(jt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Tt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,o=Lt(t);if(e){var r=Lt(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return function(t,e){if(e&&("object"===St(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Et(t)}(this,n)}}function Et(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Lt(t){return(Lt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ct(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Mt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jt(t,e)}(s,o["Component"]);var e,n,i,a=Tt(s);function s(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),Ct(Et(e=a.call(this,t)),"doMouseMove",function(t){e.init||(e.lastX=t.clientX,e.lastY=t.clientY,e.init=!0);var n=e.state.x+(t.clientX-e.lastX),o=e.state.y+(t.clientY-e.lastY);e.lastX=t.clientX,e.lastY=t.clientY,e.setState({x:n,y:o})}),Ct(Et(e),"doMouseUp",function(t){e.props.onFinishCreateLink()}),e.state={x:e.props.start.x,y:e.props.start.y},e.init=!1,e.lastX=-1,e.lastY=-1,e}return e=s,(n=[{key:"componentDidMount",value:function(){document.addEventListener("mousemove",this.doMouseMove),document.addEventListener("mouseup",this.doMouseUp)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousemove",this.doMouseMove),document.removeEventListener("mouseup",this.doMouseUp)}},{key:"render",value:function(){return r.a.createElement(xt,{key:-1,start:{x:this.props.start.x,y:this.props.start.y},end:{x:this.state.x,y:this.state.y}})}}])&&Pt(e.prototype,n),i&&Pt(e,i),Object.defineProperty(e,"prototype",{writable:!1}),s}();function Rt(t){"@babel/helpers - typeof";return(Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dt(t){return function(t){if(Array.isArray(t))return _t(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return _t(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _t(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _t(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function It(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Nt(t,e){return(Nt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ut(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,o=Wt(t);if(e){var r=Wt(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return function(t,e){if(e&&("object"===Rt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return zt(t)}(this,n)}}function zt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Wt(t){return(Wt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Bt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Vt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Nt(t,e)}(s,o["Component"]);var e,n,i,a=Ut(s);function s(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),Bt(zt(e=a.call(this,t)),"getItemPosition",function(t,n){return{x:E.dateToPixel(n,0,e.props.dayWidth),y:t*e.props.itemheight+e.props.itemheight/2}}),Bt(zt(e),"renderCreateLink",function(){if(e.props.interactiveMode){var t=tt.getTask(e.props.taskToCreate.task.id),n=e.getItemPosition(t.index,t.item.end);return r.a.createElement(Mt,{start:n,onFinishCreateLink:e.props.onFinishCreateLink})}}),Bt(zt(e),"renderChangingTaskLinks",function(){if(e.props.changingTask!=e.state.changingTask){e.state.changingTask=e.props.changingTask;var t=tt.getLinks(e.state.changingTask.item.id);if(!t)return;for(var n=null,o=null,i=null,a={},s={},c=0;c<t.length;c++)n=t[c],(o=tt.getTask(n.link.start))&&(i=tt.getTask(n.link.end))&&(a=e.getItemPosition(o.index,o.item.end),e.state.changingTask.item.id==n.link.start&&(a.x=e.state.changingTask.position.end),s=e.getItemPosition(i.index,i.item.start),e.state.changingTask.item.id==n.link.end&&(s.x=e.state.changingTask.position.start),e.cache[n.index]=r.a.createElement(xt,{key:-c-1,item:n,start:{x:a.x,y:a.y},end:{x:s.x,y:s.y},isSelected:e.props.selectedItem==n,onSelectItem:e.props.onSelectItem}),e.cache=Dt(e.cache))}}),e.cache=[],e.state={links:[],data:[],selectedItem:null},e}return e=s,(n=[{key:"renderLink",value:function(t,e,n,o){var i=this.getItemPosition(t.index,t.item.end),a=this.getItemPosition(e.index,e.item.start);return r.a.createElement(xt,{key:o,item:n,start:{x:i.x,y:i.y},end:{x:a.x,y:a.y},isSelected:this.props.selectedItem==n,onSelectItem:this.props.onSelectItem})}},{key:"renderLinks",value:function(){this.cache=[];var t,e={},n={};if(0!=this.state.data.length)for(var o=0;o<this.state.links.length;o++){var r=this.state.links[o];!r&&e[r.id]||((t=tt.getTask(r.start))&&(n=tt.getTask(r.end))?(this.cache.push(this.renderLink(t,n,r,o)),e[r.id]=""):this.cache.push(null))}}},{key:"refreshData",value:function(){this.props.links==this.state.links&&this.props.data==this.state.data&&this.props.dayWidth==this.state.dayWidth&&this.props.selectedItem==this.state.selectedItem||(this.state.selectedItem=this.props.selectedItem,this.state.dayWidth=this.props.dayWidth,this.state.links=this.props.links,this.state.data=this.props.data,this.state.links&&this.state.data&&this.renderLinks())}},{key:"render",value:function(){return this.refreshData(),this.renderChangingTaskLinks(),r.a.createElement("svg",{x:0,y:0,width:"100%",pointerEvents:"none",style:{position:"absolute",top:60,userSelect:"none",height:"100%"}},r.a.createElement("defs",null,r.a.createElement("marker",{id:"arrow",viewBox:"0 0 10 10",refX:"5",refY:"5",markerWidth:"9",markerHeight:"9",orient:"auto-start-reverse"},r.a.createElement("path",{d:"M 0 0 L 10 5 L 0 10 z",strokeLinejoin:"round"}))),r.a.createElement("g",{transform:"matrix(1,0,0,1,".concat(-(this.props.scrollLeft-this.props.nowposition),",").concat(-this.props.scrollTop,")")},this.cache,this.renderCreateLink()))}}])&&It(e.prototype,n),i&&It(e,i),Object.defineProperty(e,"prototype",{writable:!1}),s}();function Ft(t){"@babel/helpers - typeof";return(Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function At(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ht(t,e){return(Ht=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Yt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,o=qt(t);if(e){var r=qt(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return function(t,e){if(e&&("object"===Ft(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Xt(t)}(this,n)}}function Xt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qt(t){return(qt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Gt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Kt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ht(t,e)}(s,o["Component"]);var e,n,i,a=Yt(s);function s(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),Gt(Xt(e=a.call(this,t)),"onFocus",function(){e.setState({editing:!0})}),Gt(Xt(e),"onBlur",function(){e.finishEditing()}),Gt(Xt(e),"handleKey",function(t){13===(t.keyCode||t.which)&&e.finishEditing()}),Gt(Xt(e),"finishEditing",function(){e.isFocus=!1,e.setState({editing:!1}),e.props.onChange&&e.props.onChange(e.state.value)}),Gt(Xt(e),"handleChange",function(t){e.setState({value:t.target.value})}),Gt(Xt(e),"renderDiv",function(){return r.a.createElement("div",{tabIndex:e.props.index,onClick:e.onFocus,onFocus:e.onFocus,style:{width:"100%"}}," ",e.state.value)}),Gt(Xt(e),"renderEditor",function(){return r.a.createElement("input",{ref:e.textInput,onBlur:e.onBlur,style:{width:"100%",outlineColor:"black",outlineStyle:"oinset"},type:"text",name:"name",value:e.state.value,onKeyUp:e.handleKey,onChange:e.handleChange})}),e.isFocus=!1,e.state={editing:!1,value:e.props.value},e.textInput=r.a.createRef(),e}return e=s,(n=[{key:"componentDidUpdate",value:function(t,e){this.textInput.current&&!this.isFocus&&(this.textInput.current.focus(),this.isFocus=!0)}},{key:"shouldComponentUpdate",value:function(t,e){return t.value!=this.props.value&&(this.state.value=t.value),!0}},{key:"render",value:function(){return this.state.editing?this.renderEditor():this.renderDiv()}}])&&At(e.prototype,n),i&&At(e,i),Object.defineProperty(e,"prototype",{writable:!1}),s}();function $t(t){"@babel/helpers - typeof";return($t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function Qt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Jt(Object(n),!0).forEach(function(e){Zt(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Jt(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Zt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function te(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ee(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ne(t,e,n){return e&&ee(t.prototype,e),n&&ee(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function oe(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&re(t,e)}function re(t,e){return(re=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ie(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,o=se(t);if(e){var r=se(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return function(t,e){if(e&&("object"===$t(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ae(t)}(this,n)}}function ae(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function se(t){return(se=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ce=function(t){oe(n,o["Component"]);var e=ie(n);function n(t){var o;return te(this,n),Zt(ae(o=e.call(this,t)),"onChange",function(t){o.props.onUpdateTask&&o.props.onUpdateTask(o.props.item,{name:t})}),o}return ne(n,[{key:"render",value:function(){var t=this;return r.a.createElement("div",{className:"timeLine-side-task-row",style:Qt(Qt({},this.props.section?u.values.taskList.task.styleSection:u.values.taskList.task.style),{},{top:this.props.top,height:this.props.itemheight}),onClick:function(e){return t.props.onSelectItem(t.props.item)}},this.props.nonEditable?r.a.createElement("div",{tabIndex:this.props.index,style:{width:"100%"}},this.props.label):r.a.createElement(Kt,{value:this.props.label,index:this.props.index,onChange:this.onChange}))}}]),n}(),ue=function(t){oe(n,o["Component"]);var e=ie(n);function n(t){var o;return te(this,n),Zt(ae(o=e.call(this,t)),"doScroll",function(){o.props.onScroll(o.taskViewPort.current.scrollTop)}),o.taskViewPort=r.a.createRef(),o}return ne(n,[{key:"getContainerStyle",value:function(t){return{height:t>0?t*this.props.itemheight:10}}},{key:"renderTaskRow",value:function(t){var e=this,n=[],o=tt.groupData(t,this.props.startRow,this.props.endRow+1);return Object.keys(o).forEach(function(t,i){o[t].forEach(function(t){n.push(r.a.createElement(ce,{key:i+t.id,index:t.name+i,item:t,label:t.groupName||t.name,section:t.section,top:i*e.props.itemheight,itemheight:e.props.itemheight,isSelected:e.props.selectedItem==t,onUpdateTask:e.props.onUpdateTask,onSelectItem:e.props.onSelectItem,nonEditable:e.props.nonEditable}))})}),n}},{key:"render",value:function(){var t=this.props.data?this.props.data:[];return this.containerStyle=this.getContainerStyle(t.length),r.a.createElement("div",{className:"timeLine-side"},r.a.createElement("div",{className:"timeLine-side-title",style:u.values.taskList.title.style},r.a.createElement("div",null,u.values.taskList.title.label)),r.a.createElement("div",{ref:this.taskViewPort,className:"timeLine-side-task-viewPort",onScroll:this.doScroll},r.a.createElement("div",{className:"timeLine-side-task-container",style:this.containerStyle},this.renderTaskRow(t))))}}]),n}();function le(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function pe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var fe=function(t,e,n){return e&&le(t.prototype,e),n&&le(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),pe(this,"initialise",function(t,n,o,r){e.nowposition=o,e.daywidth=r,e.setLimits(t,n,o,r),e.loadDataHorizon()}),pe(this,"setStartEnd",function(t,n,o,r){e.nowposition=o,e.daywidth=r,e.needData(t,n)&&(e.setLimits(t,n),e.loadDataHorizon())}),pe(this,"needData",function(t,n){return t<e.lower_data_limit||n>e.upper_data_limit}),pe(this,"setLimits",function(t,n){e.lower_limit=t-1e3,e.lower_data_limit=t-750,e.upper_limit=n+1e3,e.upper_data_limit=n+750}),pe(this,"loadDataHorizon",function(){var t=E.pixelToDate(e.lower_limit,e.nowposition,e.daywidth),n=E.pixelToDate(e.upper_limit,e.nowposition,e.daywidth);e.onHorizonChange(t,n)}),this.lower_limit=0,this.upper_limit=0,this._dataToRender=[]});n(10);function de(t){"@babel/helpers - typeof";return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function he(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function ye(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function be(t,e){return(be=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function me(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,o=ve(t);if(e){var r=ve(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return function(t,e){if(e&&("object"===de(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ge(t)}(this,n)}}function ge(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ve(t){return(ve=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function we(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ke=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&be(t,e)}(s,o["Component"]);var e,n,i,a=me(s);function s(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),we(ge(e=a.call(this,t)),"onSize",function(t){e.calculateVerticalScrollVariables(t),e.initialise||(e.dc.initialise(e.state.scrollLeft+e.state.nowposition,e.state.scrollLeft+e.state.nowposition+t.width,e.state.nowposition,e.state.dayWidth),e.initialise=!0),e.setStartEnd();var n=Math.ceil(t.height/e.props.itemheight),o=e.calcNumVisibleDays(t),r=e.calculateStartEndRows(n,e.props.data,e.state.scrollTop);e.setState({numVisibleRows:n,numVisibleDays:o,startRow:r.start,endRow:r.end,size:t})}),we(ge(e),"verticalChange",function(t){if(t!=e.state.scrollTop){var n=e.calculateStartEndRows(e.state.numVisibleRows,e.props.data,t);n.start!==e.state.start&&e.setState({scrollTop:t,startRow:n.start,endRow:n.end})}}),we(ge(e),"calculateStartEndRows",function(t,n,o){var r=Math.trunc(o/e.props.itemheight);return{start:r,end:r+t>=n.length?n.length:r+t}}),we(ge(e),"setStartEnd",function(){e.dc.setStartEnd(e.state.scrollLeft,e.state.scrollLeft+e.state.size.width,e.state.nowposition,e.state.dayWidth)}),we(ge(e),"horizontalChange",function(t){var n=e.state.nowposition,o=-1,r=e.state.headerData,i=e.state.startRow,a=e.state.endRow;t>e.pxToScroll?(n=e.state.nowposition-e.pxToScroll,o=0):t<=0?(n=e.state.nowposition+e.pxToScroll,o=e.pxToScroll):o=t;var s=Math.trunc((t-e.state.nowposition)/e.state.dayWidth);a=(i=Math.trunc(e.state.scrollTop/e.props.itemheight))+e.state.numVisibleRows>=e.props.data.length?e.props.data.length-1:i+e.state.numVisibleRows,e.setStartEnd(),e.setState({currentday:s,nowposition:n,headerData:r,scrollLeft:o,startRow:i,endRow:a})}),we(ge(e),"calculateVerticalScrollVariables",function(t){e.pxToScroll=(1-t.width/k)*k-1}),we(ge(e),"onHorizonChange",function(t,n){e.props.onHorizonChange&&e.props.onHorizonChange(t,n)}),we(ge(e),"doMouseDown",function(t){e.dragging=!0,e.draggingPosition=t.clientX}),we(ge(e),"doMouseMove",function(t){if(e.dragging){var n=e.draggingPosition-t.clientX;0!==n&&(e.draggingPosition=t.clientX,e.horizontalChange(e.state.scrollLeft+n))}}),we(ge(e),"doMouseUp",function(t){e.dragging=!1}),we(ge(e),"doMouseLeave",function(t){e.dragging=!1}),we(ge(e),"doTouchStart",function(t){e.dragging=!0,e.draggingPosition=t.touches[0].clientX}),we(ge(e),"doTouchEnd",function(t){e.dragging=!1}),we(ge(e),"doTouchMove",function(t){if(e.dragging){var n=e.draggingPosition-t.touches[0].clientX;0!==n&&(e.draggingPosition=t.touches[0].clientX,e.horizontalChange(e.state.scrollLeft+n))}}),we(ge(e),"doTouchCancel",function(t){e.dragging=!1}),we(ge(e),"doMouseLeave",function(t){e.dragging=!1}),we(ge(e),"onTaskListSizing",function(t){e.setState(function(e){var n=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?he(Object(n),!0).forEach(function(e){we(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},e);return n.sideStyle={width:n.sideStyle.width-t},n})}),we(ge(e),"onSelectItem",function(t){e.props.onSelectItem&&t!=e.props.selectedItem&&e.props.onSelectItem(t)}),we(ge(e),"onStartCreateLink",function(t,n){e.setState({interactiveMode:!0,taskToCreate:{task:t,position:n}})}),we(ge(e),"onFinishCreateLink",function(t,n){e.props.onCreateLink&&t&&e.state.taskToCreate&&e.state.taskToCreate.task.id!=t.id&&e.props.onCreateLink({start:e.state.taskToCreate,end:{task:t,position:n}}),e.setState({interactiveMode:!1,taskToCreate:null})}),we(ge(e),"onTaskChanging",function(t){e.setState({changingTask:t})}),we(ge(e),"calcNumVisibleDays",function(t){return Math.ceil(t.width/e.state.dayWidth)+w}),we(ge(e),"checkNeeeData",function(){if(e.props.data!=e.state.data){e.state.data=e.props.data;var t=e.calculateStartEndRows(e.state.numVisibleRows,e.props.data,e.state.scrollTop);e.state.startRow=t.start,e.state.endRow=t.end,tt.registerData(e.state.data)}e.props.links!=e.state.links&&(e.state.links=e.props.links,tt.registerLinks(e.props.links))}),e.dragging=!1,e.draggingPosition=0,e.dc=new fe,e.dc.onHorizonChange=e.onHorizonChange,e.pxToScroll=1900;var n=e.getDayWidth(e.props.mode);return u.load(e.props.config),e.state={currentday:0,nowposition:0,startRow:0,endRow:10,sideStyle:{width:200},scrollLeft:0,scrollTop:0,numVisibleRows:40,numVisibleDays:60,dayWidth:n,taskNote:"",interactiveMode:!1,taskToCreate:null,links:[],mode:e.props.mode?e.props.mode:S,size:{width:1,height:1},changingTask:null},e.dc.initialise(e.state.scrollLeft+e.state.nowposition,e.state.scrollLeft+e.state.nowposition+e.state.size.width,e.state.nowposition,e.state.dayWidth),e.initialise=!0,e}return e=s,(n=[{key:"getDayWidth",value:function(t){switch(t){case O:return 1440;case x:return 480;case S:return 24;case P:return 4;default:return 24}}},{key:"checkMode",value:function(){if(this.props.mode!=this.state.mode&&this.props.mode){this.state.mode=this.props.mode;var t=this.getDayWidth(this.state.mode);this.state.dayWidth=t,this.state.numVisibleDays=this.calcNumVisibleDays(this.state.size);var e=Math.ceil(-this.state.currentday*this.state.dayWidth/this.pxToScroll);this.state.nowposition=e*this.pxToScroll;var n=(this.state.currentday*this.state.dayWidth+this.state.nowposition)%this.pxToScroll;this.state.scrollLeft=n}}},{key:"render",value:function(){return this.checkMode(),this.checkNeeeData(),r.a.createElement("div",{className:"timeLine"},r.a.createElement("div",{className:"timeLine-side-main",style:this.state.sideStyle},r.a.createElement(ue,{itemheight:this.props.itemheight,startRow:this.state.startRow,endRow:this.state.endRow,data:this.props.data,selectedItem:this.props.selectedItem,onSelectItem:this.onSelectItem,onUpdateTask:this.props.onUpdateTask,onScroll:this.verticalChange,nonEditable:this.props.nonEditableName}),r.a.createElement(b,{onTaskListSizing:this.onTaskListSizing})),r.a.createElement("div",{className:"timeLine-main"},r.a.createElement(F,{headerData:this.state.headerData,numVisibleDays:this.state.numVisibleDays,currentday:this.state.currentday,nowposition:this.state.nowposition,dayWidth:this.state.dayWidth,mode:this.state.mode,scrollLeft:this.state.scrollLeft}),r.a.createElement(ht,{taskNote:this.props.taskNote,scrollLeft:this.state.scrollLeft,scrollTop:this.state.scrollTop,itemheight:this.props.itemheight,nowposition:this.state.nowposition,startRow:this.state.startRow,endRow:this.state.endRow,data:this.props.data,selectedItem:this.props.selectedItem,dayWidth:this.state.dayWidth,onScroll:this.scrollData,onMouseDown:this.doMouseDown,onMouseMove:this.doMouseMove,onMouseUp:this.doMouseUp,onMouseLeave:this.doMouseLeave,onTouchStart:this.doTouchStart,onTouchMove:this.doTouchMove,onTouchEnd:this.doTouchEnd,onTouchCancel:this.doTouchCancel,onSelectItem:this.onSelectItem,onUpdateTask:this.props.onUpdateTask,onTaskChanging:this.onTaskChanging,onStartCreateLink:this.onStartCreateLink,onFinishCreateLink:this.onFinishCreateLink,boundaries:{lower:this.state.scrollLeft,upper:this.state.scrollLeft+this.state.size.width},onSize:this.onSize}),r.a.createElement(Vt,{scrollLeft:this.state.scrollLeft,scrollTop:this.state.scrollTop,startRow:this.state.startRow,endRow:this.state.endRow,data:this.props.data,nowposition:this.state.nowposition,dayWidth:this.state.dayWidth,interactiveMode:this.state.interactiveMode,taskToCreate:this.state.taskToCreate,onFinishCreateLink:this.onFinishCreateLink,changingTask:this.state.changingTask,selectedItem:this.props.selectedItem,onSelectItem:this.onSelectItem,itemheight:this.props.itemheight,links:this.props.links})))}}])&&ye(e.prototype,n),i&&ye(e,i),Object.defineProperty(e,"prototype",{writable:!1}),s}();ke.propTypes={itemheight:a.a.number.isRequired,dayWidth:a.a.number.isRequired,nonEditableName:a.a.bool},ke.defaultProps={itemheight:20,dayWidth:24,nonEditableName:!1};e.default=ke}])});